!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common/http"),require("@angular/common"),require("@angular/core")):"function"==typeof define&&define.amd?define("bh-lib",["exports","@angular/common/http","@angular/common","@angular/core"],e):e(t["bh-lib"]={},t.ng.common.http,t.ng.common,t.ng.core)}(this,function(t,r,e,o){"use strict";var n=function(){function t(){}return t.prototype.toLogText=function(t,e,o,r,n){var i=[];if(i.push("["+t+"]"),r&&(n?i.push("["+r+"::"+n+"]"):i.push("["+r+"]")),i.push(" "+e),o){for(var a in o)o[a]&&o[a]instanceof Error&&(o[a]=o[a].message);i.push(" [context: "+JSON.stringify(o)+"]")}return i.join("")},t.prototype.log=function(t,e,o,r){console.log(this.toLogText("LOG",t,e,o,r))},t.prototype.debug=function(t,e,o,r){console.trace(this.toLogText("DEBUG",t,e,o,r))},t.prototype.info=function(t,e,o,r){console.info(this.toLogText("INFO",t,e,o,r))},t.prototype.warn=function(t,e,o,r){console.warn(this.toLogText("WARN",t,e,o,r))},t.prototype.error=function(t,e,o,r){console.error(this.toLogText("ERROR",t,e,o,r))},t.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=o.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),i=function(){function t(t){this.bhLogger=t}return t.prototype.rectToRectPoint=function(t){return t?{leftBottom:{x:t.x,y:t.y+t.height},rightTop:{x:t.x+t.width,y:t.y}}:(this.bhLogger.warn("Rect is empty.",null,"BhCanvasRectService","rectToRectPoint"),null)},t.prototype.rectPointToRect=function(t){return t?{x:t.leftBottom.x,y:t.rightTop.y,width:t.rightTop.x-t.leftBottom.x,height:t.leftBottom.y-t.rightTop.y}:(this.bhLogger.warn("Rect Point is empty.",null,"BhCanvasRectService","rectPointToRect"),null)},t.prototype.getCoverageRect=function(t,e){var o=this.rectToRectPoint(t),r=this.rectToRectPoint(e),n={leftBottom:{x:Math.max(o.leftBottom.x,r.leftBottom.x),y:Math.min(o.leftBottom.y,r.leftBottom.y)},rightTop:{x:Math.min(o.rightTop.x,r.rightTop.x),y:Math.max(o.rightTop.y,r.rightTop.y)}};return n.leftBottom.x>n.rightTop.x?null:n.rightTop.y>n.leftBottom.y?null:this.rectPointToRect(n)},t.prototype.getPercentageOfCoverageByCoverageRect=function(t,e){return e?Math.ceil(e.width*e.height/(t.width*t.height)*100):0},t.prototype.getPercentageOfCoverage=function(t,e){var o=this.getCoverageRect(t,e);return o?this.getPercentageOfCoverageByCoverageRect(t,o):0},t.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:n}]},t.ngInjectableDef=o.defineInjectable({factory:function(){return new t(o.inject(n))},token:t,providedIn:"root"}),t}(),a=function(){function t(){}return t.prototype.toString=function(t,e){return"boolean"==typeof t?t.toString():t?t.toString():e||""},t.prototype.toNumber=function(t,e){return"string"!=typeof t||/^[0-9\-\.]*$/g.test(t)?Array.isArray(t)?e||0:(t=parseInt(t,10),isNaN(t)?e||0:t):e||0},t.prototype.toFloat=function(t,e){return"string"!=typeof t||/^[0-9\-\.]*$/g.test(t)?Array.isArray(t)?e||0:(t=parseFloat(t),isNaN(t)?e||0:t):e||0},t.prototype.toBoolean=function(t,e){if("string"==typeof t){if("true"===t)return!0;if("false"===t)return!1}return"boolean"!=typeof t?e||!1:!!t},t.prototype.toArrayChunk=function(t,e){if(!t||t.length<=0)return[[]];if((e=this.toNumber(e))<=0)return[t];for(var o=[],r=t.slice(0);r.length;)o.push(r.splice(0,e));return o},t.prototype.tsToDate=function(t){return t=this.toNumber(t),new Date(1e3*t)},t.prototype.dateToTs=function(t){return t||(t=new Date),Math.floor(t.getTime()/1e3)},t.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=o.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),c=function(){function t(){}return t.prototype.get=function(){return this.model?this.model:this.getDefault()},t.prototype.set=function(t){this.model=t},t.prototype.hasModel=function(){return!!this.model},t}();var u=function(){function t(){}return t.prototype.getOptionFromValue=function(t,e){var o,r;try{for(var n=function c(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}}(t),i=n.next();!i.done;i=n.next()){var a=i.value;if(a.value===e)return a}}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n["return"])&&r.call(n)}finally{if(o)throw o.error}}return null},t.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=o.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),p=function(){function t(t){this.bhFormatService=t}return t.prototype.paramsToQueryString=function(t){var e=[];for(var o in t){var r=this.bhFormatService.toString(t[o]);r=r?encodeURIComponent(r.toString()):"",e.push(o+"="+r)}return e.join("&")},t.prototype.paramsToHttpParams=function(t){var e=new r.HttpParams;for(var o in t)e=e.set(o,this.bhFormatService.toString(t[o]));return e},t.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:a}]},t.ngInjectableDef=o.defineInjectable({factory:function(){return new t(o.inject(a))},token:t,providedIn:"root"}),t}(),f=function(){function t(t){this.bhLogger=t,this.width=640,this.height=480,this.onReady=new o.EventEmitter,this.onError=new o.EventEmitter}return t.prototype.ngAfterViewInit=function(){var e=this;this.video=this.videoElement.nativeElement,this.facingMode&&"environment"===this.facingMode||(this.facingMode="user"),window.navigator.mediaDevices.getUserMedia({video:{width:{exact:this.width},height:{exact:this.height},deviceId:this.deviceId,facingMode:this.facingMode},audio:!1}).then(function(t){e.bhLogger.log("User camera is ready.",null,"UserCameraComponent","ngAfterViewInit"),e.video.srcObject=t,e.onReady.emit(e.video)})["catch"](function(t){e.bhLogger.warn("Unable to get camera stream.",t,"UserCameraComponent","ngAfterViewInit"),e.onError.emit(t)})},t.decorators=[{type:o.Component,args:[{selector:"bh-user-camera",template:'<video [width]="width" [height]="height" #userCamera></video>',styles:[""]}]}],t.ctorParameters=function(){return[{type:n}]},t.propDecorators={videoElement:[{type:o.ViewChild,args:["userCamera"]}],width:[{type:o.Input}],height:[{type:o.Input}],deviceId:[{type:o.Input}],facingMode:[{type:o.Input}],onReady:[{type:o.Output}],onError:[{type:o.Output}]},t}(),s=function(){function t(){}return t.decorators=[{type:o.NgModule,args:[{declarations:[f],imports:[e.CommonModule],exports:[f]}]}],t}(),g=function(){function t(t){if(this.bhLogger=t,!window.localStorage)throw new Error("Unsupported localStorage.")}return t.prototype.set=function(t,e){window.localStorage.setItem(t,JSON.stringify(e))},t.prototype.get=function(t){var e=window.localStorage.getItem(t);return e&&"undefined"!=e&&"null"!=e?JSON.parse(e):(this.bhLogger.log('"'+t+'" value not found in storage.',{key:t},"BhLocalstorageService","get"),null)},t.prototype.remove=function(t){window.localStorage.removeItem(t)},t.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:n}]},t.ngInjectableDef=o.defineInjectable({factory:function(){return new t(o.inject(n))},token:t,providedIn:"root"}),t}();t.BhCanvasRectService=i,t.BhFormatService=a,t.BhLogger=n,t.BhModel=c,t.BhFormService=u,t.BhHttpService=p,t.BhNativeModule=s,t.UserCameraComponent=f,t.BhLocalstorageService=g,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=bh-lib.umd.min.js.map